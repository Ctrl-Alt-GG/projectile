<html lang="hu">
<head>
    <title>Projectile</title>
</head>
<body>

<pre id="data"></pre>
<script>
    (function () { // private namespace

        function fetchBundle() {
            return new Promise((resolve, reject) => {
                fetch("/api/bundle", {
                    method: "GET",
                }).then(resp => {
                    if (!resp.ok) {
                        console.error("resp not ok:", resp.status);
                        reject(new Error("not good"));
                    }
                    resp.json().then(data => {
                        //console.log("got answer", data)
                        resolve(data);
                    }).catch(reject);
                }).catch(reject);
            })
        }

        function doUpdate() {
            fetchBundle().then((data) => {
                document.getElementById("data").innerText = JSON.stringify(data)
            }).catch(err => {
                console.log(err)
            });
        }

        setInterval(doUpdate, 10000);
        doUpdate();
    })();
</script>
</body>
</html>